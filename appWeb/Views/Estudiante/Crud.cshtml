@model Modelo.EstudianteModelo
@{
    ViewBag.Title = "Crud";

}

<br />
<ol class="breadcrumb">
    <li><a href="~/Estudiante">Estudiante</a></li>
    <li class="active">@(Model.Id > 0 ? Model.PrimerNombre + " " + Model.PrimerApellido : "Nuevo Registro")</li>
</ol>


@using (Html.BeginForm("Crud", "Estudiante", FormMethod.Post, new { id = "frm_estudiante", @class = "form-horizontal" }))
{

    @Html.HiddenFor(x => x.Id)
    <div class="form-group">
        @Html.LabelFor(model => model.PrimerNombre, new { @class = "col-lg-3 col-sm-3 control-label" })
        <div class="col-lg-6">
            @Html.TextBoxFor(model => model.PrimerNombre, new { @class = "form-control " })
            @Html.ValidationMessageFor(x => x.PrimerNombre, null, new { @class = "text-danger" })
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(model => model.PrimerApellido, new { @class = "col-lg-3 col-sm-3 control-label" })
        <div class="col-lg-6">
            @Html.TextBoxFor(model => model.PrimerApellido, new { @class = "form-control " })
            @Html.ValidationMessageFor(x => x.PrimerApellido, null, new { @class = "text-danger" })
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(model => model.NoIdentifacion, new { @class = "col-lg-3 col-sm-3 control-label" })
        <div class="col-lg-6">
            @Html.TextBoxFor(model => model.NoIdentifacion, new { @class = "form-control " })
            @Html.ValidationMessageFor(x => x.NoIdentifacion, null, new { @class = "text-danger" })
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(model => model.Email, new { @class = "col-lg-3 col-sm-3 control-label" })
        <div class="col-lg-6">
            @Html.TextBoxFor(model => model.Email, new { @class = "form-control " })
            @Html.ValidationMessageFor(x => x.Email, null, new { @class = "text-danger" })
        </div>
    </div>

    <div class="text-left">
        <a href="/Estudiante" class="btn btn-default">Regresar</a>
        <button type="submit" class="btn btn-primary">Guardar</button>
    </div>
}
@section scripts {
    <script>
        $(document).ready(function () {


            $("#frm_estudiante").submit(function () {
                var form = $(this);

                $.ajax({
                    dataType: 'JSON',
                    type: 'POST',
                    url: form.attr('action'),
                    data: form.serialize(),                   
                    success: function (r) {
                        console.log("recibido: " + r);
                        if (r.response) {
                            window.location.href = "/Estudiante";
                        } else {
                            alert(r.message);
                        }
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        console.log(textStatus + ' ' + errorThrown);
                    }
                });

                return false;
            })


        })
    </script>
}


